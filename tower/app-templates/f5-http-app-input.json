"web_app": {
    "class": "Application",
    "template": "http",
    "serviceMain": {
        "class": "Service_HTTP",
        "virtualAddresses": [
            "{{private_ip}}"
        ],
        "pool": "app_pool"
    },
    "app_pool": {
        "class": "Pool",
        "monitors": [
            "http"
        ],
        "members": [
            {
                "servicePort": 443,
                "serverAddresses": [
                    {% set comma = joiner(",") %}
                    {% for mem in pool_members %}
                        {{comma()}} "{{  hostvars[mem]['ansible_host']  }}"
                    {% endfor %}

                ]
            }
        ]
    }
}

{
    "class": "Tenant",
    "A1": {
        "class": "Application",
        "template": "http",
        "serviceMain": {
            "class": "Service_HTTP",
            "virtualAddresses": [
                "{{private_ip}}"
            ],
            "pool": "web_pool"
        },
        "web_pool": {
            "class": "Pool",
            "monitors": [
                "http"
            ],
            "members": [{
                "servicePort": 8001,
                "serverAddresses": [
                    "10.1.10.100",
                    "10.1.10.101"
                ]
            }]
        }
    }
}